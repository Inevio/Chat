
{
    "addChannel"            : "INSERT INTO channel SET id = ?, name = ?, time = ?",
    "addUserInChannel"      : "INSERT INTO user_in_channel SET id_channel = ?, user = ? ON DUPLICATE KEY UPDATE user = user",
    "getChannels"           : "SELECT t1.id, t1.name, t1.time, t1.world_id FROM channel AS t1 INNER JOIN user_in_channel t2 ON t2.id_channel = t1.id WHERE t2.user = ?",
    "getSingleChannel"      : "SELECT id_channel, user FROM user_in_channel WHERE id_channel IN ( SELECT id_channel FROM user_in_channel, channel WHERE user = ? AND user_in_channel.id_channel = channel.id AND channel.name IS NULL ) AND user != ?",
    "addMessage"            : "INSERT INTO message SET text = ?, sender = ?, channel = ?, time = UNIX_TIMESTAMP() * 1000",
    "getMessages"           : "SELECT * FROM message WHERE channel = ? ORDER BY id DESC LIMIT 50",
    "getLastMessage"        : "SELECT * FROM message WHERE channel = ? ORDER BY id DESC LIMIT 1",
    "getUsersInChannel"     : "SELECT user FROM user_in_channel WHERE id_channel = ?",
    "updateLastRead"        : "UPDATE user_in_channel SET last_read = ? WHERE id_channel = ? && user = ?",
    "getLastRead"           : "SELECT last_read FROM user_in_channel WHERE id_channel = ? && user = ?",
    "getUnreads"            : "SELECT COUNT(*) FROM message WHERE channel = ? && id > ? ",
    "updateChannelName"     : "UPDATE channel SET name = ? WHERE id = ?",
    "deleteUsersInChannel"  : "DELETE FROM user_in_channel WHERE id_channel = ?",
    "deleteChannel"         : "DELETE FROM channel WHERE id = ?",
    "deleteUserInChannel"   : "DELETE FROM user_in_channel WHERE id_channel = ? && user = ?",
    "getUserPreference"     : "SELECT * FROM user_preference WHERE user = ?",
    "updateUserPreference"  : "INSERT INTO user_preference (user, width, height, dark, x, y) VALUES(?, ?, ?, ?, ?, ?) ON DUPLICATE KEY UPDATE width=?, height=?, dark=?, x=?, y=?",
    "getMessagesFrom"       : "SELECT * FROM message WHERE ( channel = ? AND id < ? ) ORDER BY id DESC LIMIT 50",
    "addWorldChannel"       : "INSERT INTO channel SET id = ?, name = ? , world_id = ? , time = ?",
    "getWorldChannel"       : "SELECT * FROM channel WHERE world_id= ?"
}
