
{
    "addChannel"            : "INSERT INTO channel SET id = ?, name = ?",
    "addUserInChannel"      : "INSERT INTO user_in_channel SET id_channel = ?, user = ?",
    "getChannels"           : "SELECT t1.id, t1.name FROM channel AS t1 INNER JOIN user_in_channel t2 ON t2.id_channel = t1.id WHERE t2.user = ?",
    "getSingleChannel"      : "SELECT id_channel FROM ( SELECT id_channel, COUNT(user) AS counter FROM user_in_channel, channel WHERE ( user = ? OR user = ? ) AND user_in_channel.id_channel = channel.id AND channel.name IS NULL GROUP BY id_channel ) AS channels WHERE counter > 1",
    "addMessage"            : "INSERT INTO message SET text = ?, sender = ?, channel = ?, time = UNIX_TIMESTAMP() * 1000",
    "getMessages"           : "SELECT * FROM message WHERE channel = ? ORDER BY id DESC LIMIT 50",
    "getUsersInChannel"     : "SELECT user FROM user_in_channel WHERE id_channel = ?",
    "updateLastRead"        : "UPDATE user_in_channel SET last_read = ? WHERE id_channel = ? && user = ?",
    "getLastRead"           : "SELECT last_read FROM user_in_channel WHERE id_channel = ? && user = ?",
    "getUnreads"            : "SELECT COUNT(*) FROM message WHERE channel = ? && id > ? ",
    "updateChannelName"     : "UPDATE channel SET name = ? WHERE id = ?",
    "deleteUsersInChannel"  : "DELETE FROM user_in_channel WHERE id_channel = ?",
    "deleteChannel"         : "DELETE FROM channel WHERE id = ?",
    "deleteUserInChannel"   : "DELETE FROM user_in_channel WHERE id_channel = ? && user = ?"
}
